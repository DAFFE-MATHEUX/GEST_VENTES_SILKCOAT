{% extends 'admin.html' %}
{% block contents %}

<h2>Ajouter du Stock Ã  Plusieurs Produits</h2>

{% if messages %}
    {% for mgs in messages %}
        <div class="alert 
            {% if mgs.tags == 'success' %} alert-success
            {% elif mgs.tags == 'error' %} alert-danger
            {% else %} alert-info
            {% endif %}">
            {{ mgs }}
        </div>
    {% endfor %}
{% endif %}

<form method="post">
    {% csrf_token %}

    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Produit</th>
                <th>QuantitÃ© Ã  ajouter</th>
                <th>Seuil dâ€™alerte</th>
            </tr>
        </thead>

        <tbody>
            {% for p in produits %}
            <tr>
                <td>
                    <strong>{{ p.refprod }}</strong> â€“ {{ p.desgprod }}
                    <input type="hidden" name="produit[]" value="{{ p.id }}">
                </td>

                <td>
                    <input type="number"
                           name="qtestock[]"
                           class="form-control"
                           min="0"
                           value="0"
                           required>
                </td>

                <td>
                    <input type="number"
                           name="seuil[]"
                           class="form-control"
                           min="0"
                           value="0"
                           required>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <button type="submit" class="btn btn-primary mt-3">
        ðŸ’¾ Enregistrer les stocks
    </button>
</form>

{% endblock %}
