{% extends 'admin.html' %}
{% load static %}
{% block contents %}

<style>
  .table-responsive { overflow-x: auto; width: 100%; }
  .table td, .table th { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
  body { overflow-x: hidden; }
  .text-right { text-align: right; }
  .mb-3 { margin-bottom: 15px; }
  .modal-lg { max-width: 700px; }
  .modal-md { max-width: 500px; }
  #modal_exportation{
    align-content: center;

  }
</style>

<div id="page-wrapper">
  <div id="page-inner">

    <div class="row">
      <div class="col-md-12">
        <h2>EXPORTATIONS DES VENTES</h2>
      </div>
    </div>
    <br>

    <!-- Bouton pour ouvrir le modal -->
   <div id="modal_exportation">
       <div class="row">
      <div class="col-md-12 text-center">
        <button type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#exporter_notes">
          <i class="fa fa-file-excel-o"></i> Exporter les Données VENTES vers Excel
        </button>
      </div>
    </div>
   </div>

  </div>
</div>

<!-- MODAL EXPORTATION -->
<div class="modal fade" id="exporter_notes" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h4 class="modal-title">EXPORTATION TOUTES LES VENTES </h4>
        <button type="button" class="close text-white" data-dismiss="modal">&times;</button>
      </div>
      <form method="post" id="form_export" action="{% url 'produits:export_ventes_par_categorie_excel' %}">
        {% csrf_token %}
        <div class="modal-body">
          <p>Êtes-vous sûr de vouloir exporter toutes les ventes vers un fichier Excel ?</p>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Oui, Exporter</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  // --- FAIRE DISPARAÎTRE LES ALERTES APRÈS 4s ---
  setTimeout(() => {
    document.querySelectorAll('.alert').forEach(alert => {
      alert.style.transition = "opacity 0.5s";
      alert.style.opacity = "0";
      setTimeout(() => alert.remove(), 500);
    });
  }, 4000);
</script>

{% endblock %}
